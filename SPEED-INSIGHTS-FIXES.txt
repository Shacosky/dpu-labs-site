SPEED INSIGHTS - Plan de Optimizaci√≥n
Fecha: 16 diciembre 2025
Real Experience Score: 65 (Needs Improvement)

=====================================
PROBLEMAS DETECTADOS
=====================================

1. INP (Interaction to Next Paint): 1,408 ms ‚ùå
   - Ideal: <200 ms
   - Causa: Scripts bloqueantes, componentes pesados sin lazy loading

2. TTFB (Time to First Byte): 1.87 s ‚ùå
   - Ideal: <600 ms
   - Causa: Server response lento, posibles queries DB pesadas

3. FCP (First Contentful Paint): 2.43 s ‚ö†Ô∏è
   - Ideal: <1.8 s
   - Causa: Im√°genes sin optimizar, recursos bloqueantes

4. LCP (Largest Contentful Paint): 2.43 s ‚ö†Ô∏è
   - Ideal: <2.5 s
   - Causa: Im√°genes hero sin prioridad, no optimizadas

5. CLS (Cumulative Layout Shift): 0.04 ‚úÖ
   - Estado: GOOD

=====================================
SOLUCIONES (Orden de prioridad)
=====================================

üîß FASE 1: Optimizaci√≥n de Im√°genes (Impacto: ALTO)
--------------------------------------------------
‚ñ° Convertir todos los <img> a <Image> de Next.js
  Archivos a revisar:
  - components/Hero.tsx
  - components/Services.tsx
  - components/Cases.tsx
  - components/Stack.tsx
  - app/opengraph-image.tsx
  - app/icon.tsx

  Antes:
    <img src="/hero.png" alt="Hero" />
  
  Despu√©s:
    import Image from 'next/image';
    <Image src="/hero.png" alt="Hero" width={1200} height={600} priority />

‚ñ° Agregar priority a imagen hero (above the fold)
‚ñ° Usar placeholder="blur" en im√°genes grandes
‚ñ° Configurar deviceSizes y imageSizes en next.config.ts:
  
  images: {
    deviceSizes: [640, 750, 828, 1080, 1200],
    imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
    formats: ['image/webp', 'image/avif'],
  }

üîß FASE 2: Lazy Loading de Componentes (Impacto: ALTO)
------------------------------------------------------
‚ñ° Navbar: Diferir men√∫ mobile hasta interacci√≥n
  
  import dynamic from 'next/dynamic';
  const MobileMenu = dynamic(() => import('./MobileMenu'), { ssr: false });

‚ñ° WhatsAppButton: Cargar solo cuando visible
  
  const WhatsAppButton = dynamic(() => import('./WhatsAppButton'), { 
    ssr: false,
    loading: () => null 
  });

‚ñ° OsintDiagram: Ya es pesado, cargar bajo demanda
  
  const OsintDiagram = dynamic(() => import('./OsintDiagram').then(m => ({ default: m.OsintDiagram })), {
    loading: () => <div className="animate-pulse">Cargando diagrama...</div>
  });

üîß FASE 3: Scripts de Terceros (Impacto: MEDIO)
-----------------------------------------------
‚ñ° Clerk: Ya est√° optimizado
‚ñ° Vercel Speed Insights: Mover a <body> final (ya est√°)
‚ñ° Revisar si hay analytics adicionales y diferirlos:
  
  <script src="..." defer />

üîß FASE 4: Server-Side Optimization (Impacto: MEDIO)
----------------------------------------------------
‚ñ° Habilitar caching est√°tico para rutas p√∫blicas
  
  // app/page.tsx (home)
  export const revalidate = 3600; // 1 hora

‚ñ° Optimizar queries MongoDB:
  - Agregar √≠ndices en campos frecuentes
  - Limitar resultados con .limit()
  - Proyectar solo campos necesarios

‚ñ° Revisar middleware.ts:
  - Verificar que no haga operaciones pesadas
  - Considerar edge runtime para rutas p√∫blicas

üîß FASE 5: Bundle Size (Impacto: BAJO-MEDIO)
--------------------------------------------
‚ñ° Analizar bundle: npm run build
‚ñ° Revisar dependencias grandes:
  
  npm list --depth=0 | grep -i large

‚ñ° Considerar code splitting manual en rutas pesadas:
  
  // app/dashboard/osint/page.tsx
  export const dynamic = 'force-dynamic';

üîß FASE 6: CSS/JS Optimization (Impacto: BAJO)
----------------------------------------------
‚ñ° Tailwind: Ya est√° optimizado con JIT
‚ñ° Verificar que no haya CSS duplicado
‚ñ° Minificar manual si es necesario (Next lo hace autom√°tico)

=====================================
QUICK WINS (Hacer primero)
=====================================

1. Agregar priority a imagen hero (5 min)
2. Convertir Hero.tsx a usar next/image (10 min)
3. Lazy load WhatsAppButton (5 min)
4. Agregar revalidate a home page (2 min)

Impacto esperado: RES de 65 ‚Üí 80+ (Good)

=====================================
COMANDOS √öTILES
=====================================

# Ver bundle size
npm run build

# Analizar con webpack-bundle-analyzer
npm install -D @next/bundle-analyzer
# Agregar a next.config.ts y correr:
ANALYZE=true npm run build

# Test local performance
npm run build && npm run start
# Usar Lighthouse en Chrome DevTools

=====================================
M√âTRICAS OBJETIVO
=====================================

Despu√©s de optimizaciones:
- RES: >90 (Great)
- INP: <200 ms
- TTFB: <600 ms
- FCP: <1.8 s
- LCP: <2.5 s
- CLS: <0.1 (ya est√° bien)

=====================================
SEGUIMIENTO
=====================================

Semana 1: Fases 1-2 (im√°genes + lazy loading)
Semana 2: Fases 3-4 (scripts + server)
Semana 3: Fase 5-6 (bundle + css)

Validar en Speed Insights cada semana despu√©s de deploy.
